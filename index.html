<!DOCTYPE html>
<html>
<head>
    <title>Visokio</title>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/amcharts.js"></script>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/serial.js"></script>
    <script type="text/javascript" src="http://www.amcharts.com/lib/3/themes/none.js"></script>
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <!--&lt;!&ndash; Latest compiled and minified JavaScript &ndash;&gt;-->
    <!--<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>-->
    <script type="text/javascript">
        var data = [{
            "country": "USA",
            "visits": 2025
        }, {
            "country": "China",
            "visits": 1882
        }, {
            "country": "Japan",
            "visits": 1809
        }];
        function createChart(data){
            this.data = data;
            var chart = AmCharts.makeChart("chartdiv", {
                "type": "serial",
                "theme": "none",
                "dataProvider": data,
                "valueAxes": [{
                    "gridColor":"#FFFFFF",
                    "gridAlpha": 0.2,
                    "dashLength": 0
                }],
                "gridAboveGraphs": true,
                "startDuration": 1,
                "graphs": [{
                    "balloonText": "[[category]]: <b>[[value]]</b>",
                    "fillAlphas": 0.8,
                    "lineAlpha": 0.2,
                    "type": "column",
                    "valueField": "visits"
                }],
                "chartCursor": {
                    "categoryBalloonEnabled": false,
                    "cursorAlpha": 0,
                    "zoomable": false
                },
                "categoryField": "country",
                "categoryAxis": {
                    "gridPosition": "start",
                    "gridAlpha": 0,
                    "tickPosition":"start",
                    "tickLength":20
                },
                "exportConfig":{
                    "menuTop": 0,
                    "menuItems": [{
                        "icon": '/lib/3/images/export.png',
                        "format": 'png'
                    }]
                }
            });
        }
        createChart(data);
        var newCountry = $('#newCountry').value;
        function addData(data){
            this.data = data;
            var newCountry = $('#newCountry').val(),
            newVisit = $('#newVisit').val();
            if (newCountry != "" && newVisit != "") {
                data.push({"country": newCountry, "visits": newVisit});
                document.getElementById("addData").reset();
                createChart(data);
            } else if (newCountry == "" && newVisit == ""){
                $('#newVisitWarning').show();
                $('#newCountryWarning').show();
            } else if (newCountry == "" || newVisit != "") {
                $('#newCountryWarning').show();
            } else {
                $('#newVisitWarning').show();
            }
        }
    </script>
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div id="chartdiv" style="width: 100%; height: 500px;"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <form id="addData" role="form">
                <div class="form-group">
                    <label for="newCountry">Country</label> <span style="display:none; color:red;" id="newCountryWarning" class="glyphicon glyphicon-warning-sign">required!</span>
                    <input type="text" required class="form-control" id="newCountry" placeholder="Enter country">
                </div>
                <div class="form-group">
                    <label for="newVisit">Visits per month</label> <span style="display:none; color:red;" id="newVisitWarning" class="glyphicon glyphicon-warning-sign">required!</span>
                    <input type="number" required class="form-control" id="newVisit" placeholder="Enter number of visits">
                </div>
                <button type="button" class="btn btn-default btn-group-justified" onclick="addData(data)">
                    <span class="glyphicon glyphicon-plus"></span> Add data
                </button>
            </form>
        </div>
    </div>
</div>
</body>
</html>